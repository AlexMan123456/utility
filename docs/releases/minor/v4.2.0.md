# v4.2.0 (Minor Release)

**Status**: In progress

This is a new minor release of the `@alextheman/utility` package. It introduces new features in a backwards-compatible way that should require very little refactoring, if any. Please read below the description of changes.

## Description of Changes

- Adds a new `VersionNumber` class. This will replace all occurrences of any of the new versioning function helpers.
    - Yes, I know, I introduced those very recently just to deprecate them and take them away from you all, but I think this approach is genuinely better as it unifies all the functions in a much nicer way.
    - Plus, I might as well introduce this now while a refactor of this should be relatively quick, rather than later when the old functions are more heavily adopted and refactoring would take a lot more time as a result.
- The `VersionType` type is also now exported as a const object, allowing you to do `VersionType.MAJOR`, `VersionType.MINOR`, or `VersionType.PATCH`.   
    - Especially helpful for pure JavaScript users who don't immediately get type inference from adding a `VersionType` type annotation.
    - Note that existing usage should be unaffected, though. The type resolves to a union of the values of the `VersionType` const object, which is exactly the same as it was previously (`"major" | "minor" | "patch"`).

## Migration Notes

- If you want to move to using `VersionNumber` in your own projects, the following implementations can be replaced:

### parseVersion

- Use `new VersionNumber(version)` instead.
- The previous implementation of providing a string will still work:

```typescript
// Old
parseVersion("1.2.3")
parseVersion("v1.2.3")

// New
new VersionNumber("1.2.3")
new VersionNumber("v1.2.3")
```

but also supported with this is an array of numbers: 

```typescript
new VersionNumber([1,2,3])
``` 

and another instance of `VersionNumber` itself:

```typescript
const version = new VersionNumber([1,2,3])
new VersionNumber(version) // Returns a new VersionNumber instance.
```

- You can get a string representation of the version number (the old result of `parseVersion`) by doing:

```typescript
new VersionNumber(version).toString()
```

The option to omit the `v` prefix is still there - just do:

```typescript
new VersionNumber(version).toString({ omitPrefix: true })
```

### determineVersionType

- Use `new VersionNumber(version).type` instead. Example:

```typescript
// Old
determineVersionType("v1.2.3") // "patch"

// New
new VersionNumber("v1.2.3").type // "patch"
```

### getIndividualVersionNumbers

- The individual version numbers are now stored as actual properties on the result of the `VersionNumber` instance.

```typescript
const [oldMajor, oldMinor, oldPatch] = getIndividualVersionNumbers("v1.2.3")
const versionClass = new VersionNumber("v1.2.3")

oldMajor === versionClass.major // true
oldMinor === versionClass.minor // true
oldPatch === versionClass.patch // true
```

### incrementVersion

- Use `new VersionNumber(version).increment(incrementType)` instead. Example:

```typescript
// Old
const oldIncremented = incrementVersion("v1.2.3", "minor") // A new string representing the new version

// New
const newIncremented = new VersionNumber("v1.2.3").increment("minor") // A new VersionNumber instance representing the new version
```

## Additional Notes

- The benefit of the above methods is that the version number can persist across different usages.
- For example, if you wanted to increment the version by minor release, then get the individual version numbers separately, you only need to invoke the `.increment()` method once, then you have immediate access to the individual version numbers on the newly returned `VersionNumber` instance.
- This makes it so much better than the old helpers as it reduces the need to constantly keep calling `parseVersion` in every single helper, or every single time you want to do extra logic to the version. You just parse it once in the constructor then the version information persists.
